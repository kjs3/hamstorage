{"version":3,"sources":["../hamstorage.js"],"names":[],"mappings":"gBAKI,CAAA,C,CAJE,CAAC,CAAG,IAAI,CAAC,S,CACT,CAAC,CAAG,IAAI,CAAC,K,CAET,CAAQ,CAAG,CAAsB,E,CAIvC,CAAa,E,CAEb,QAAS,CAAA,CAAT,EAAyB,CACvB,CAAO,CAAG,CAAQ,CAAG,MAAM,CAAC,YAAV,CAAyB,GAAI,CAAA,CAChD,CAED,QAAS,CAAA,CAAT,EAA+B,CAC7B,GAAM,CAAA,CAAU,CAAG,EAAnB,CACA,KAAK,GAAL,CAAW,CAFkB,CAI7B,KAAK,OAAL,CAAe,SAAS,CAAT,CAAc,CAC3B,GAAM,CAAA,CAAQ,CAA8B,WAA3B,QAAO,CAAA,CAAU,CAAC,CAAD,CAAlC,CAEA,MAAO,CAAA,CAAQ,CAAG,CAAU,CAAC,CAAD,CAAb,CAAqB,IACrC,CAR4B,CAU7B,KAAK,OAAL,CAAe,SAAS,CAAT,CAAc,CAAd,CAAqB,CAClC,CAAU,CAAC,CAAD,CAAV,CAAkB,CACnB,CAZ4B,CAc7B,KAAK,UAAL,CAAkB,SAAS,CAAT,CAAc,CAC9B,CAAU,CAAC,CAAD,CAAV,OACD,CACF,CAID,QAAS,CAAA,CAAT,EAAkC,CAChC,GAAI,CAAA,CAAJ,CACwB,WAAxB,QAAO,CAAA,YAFyB,CAIhC,GAAI,CACF,CAAO,CAAG,MAAM,aADd,CAMF,MAHA,CAAA,CAAO,CAAC,OAAR,aAGA,CAFA,CAAO,CAAC,UAAR,OAEA,GACD,CAAC,MAAM,CAAN,CAAS,CACT,MAA+B,WAAxB,QAAO,CAAA,YAAP,EACL,CAAC,WAAY,CAAA,YADR,GAOM,EAAX,GAAA,CAAC,CAAC,IAAF,EAEW,IAAX,GAAA,CAAC,CAAC,IAFF,EAIW,oBAAX,GAAA,CAAC,CAAC,IAJF,EAMW,4BAAX,GAAA,CAAC,CAAC,IAbG,GAeJ,CAAO,EAAuB,CAAnB,GAAA,CAAO,CAAC,MACvB,CACF,CAED,QAAS,CAAA,CAAT,CAAa,CAAb,CAAkB,CAChB,GAAI,CACF,MAAO,CAAA,CAAC,CAAC,CAAO,CAAC,OAAR,CAAgB,CAAhB,CAAD,CACT,CAAC,MAAO,CAAP,CAAU,CAKV,MAFA,CAAA,CAAO,CAAC,OAAR,CAAgB,CAAhB,CAAqB,IAArB,CAEA,CAAO,IACR,CACF,CAED,QAAS,CAAA,CAAT,CAAa,CAAb,CAAkB,CAAlB,CAAyB,CACvB,CAAO,CAAC,OAAR,CAAgB,CAAhB,CAAqB,CAAC,CAAC,CAAD,CAAtB,CACD,CAED,QAAS,CAAA,CAAT,CAAY,CAAZ,CAAiB,CACf,CAAO,CAAC,UAAR,CAAmB,CAAnB,CACD,CAED,MAAM,CAAC,OAAP,CAAiB,CACf,OAAO,CAAE,CADM,CAEf,OAAO,CAAE,CAFM,CAGf,UAAU,CAAE,CAHG,CAIf,MAAM,CAAE,CAAQ,CAAG,cAAH,CAAoB,aAJrB,CAKf,aAAa,CAAb,CALe,CAMf,WAAW,CAAE,6BAAM,CAAA,CAAN,CANE,C","file":"hamstorage.min.js","sourcesContent":["// Lame trick to trim some bytes\nconst s = JSON.stringify\nconst p = JSON.parse\n\nconst canUseLS = _localStorageAvailable()\nlet storage\n\n// init storage\n_setupStorage()\n\nfunction _setupStorage() {\n  storage = canUseLS ? window.localStorage : new _alternativeStorage()\n}\n\nfunction _alternativeStorage() {\n  const storageObj = {}\n  this.obj = storageObj\n\n  this.getItem = function(key) {\n    const hasValue = typeof storageObj[key] !== 'undefined'\n\n    return hasValue ? storageObj[key] : null\n  }\n\n  this.setItem = function(key, value) {\n    storageObj[key] = value\n  }\n\n  this.removeItem = function(key) {\n    storageObj[key] = undefined\n  }\n}\n\n// Availability check adapted from MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\nfunction _localStorageAvailable() {\n  let storage\n  typeof DOMException !== 'undefined'\n\n  try {\n    storage = window['localStorage']\n    const x = 'foo'\n    storage.setItem(x, x)\n    storage.removeItem(x)\n\n    return true\n  } catch(e) {\n    return typeof DOMException !== 'undefined' &&\n      e instanceof DOMException && (\n\n      // Checking for full localStorage (quota exceeded).\n      // Testing code AND name field, because code might not be present.\n\n      // everything except Firefox\n      e.code === 22 ||\n      // Firefox\n      e.code === 1014 ||\n      // everything except Firefox\n      e.name === 'QuotaExceededError' ||\n      // Firefox\n      e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      (storage && storage.length !== 0)\n  }\n}\n\nfunction get(key) {\n  try {\n    return p(storage.getItem(key))\n  } catch (e) {\n    // If there's an Error reading/parsing the value set it to null.\n    // This clears out unstringified objects stored as '[object Object]'\n    storage.setItem(key, null)\n\n    return null\n  }\n}\n\nfunction set(key, value) {\n  storage.setItem(key, s(value))\n}\n\nfunction rm(key) {\n  storage.removeItem(key)\n}\n\nmodule.exports = {\n  getItem: get,\n  setItem: set,\n  removeItem: rm,\n  source: canUseLS ? 'localStorage' : 'alternative',\n  _setupStorage, // exported to allow reinitialization\n  _getStorage: () => storage // exported for testing\n}\n"]}